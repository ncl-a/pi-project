<div class="card" *ngIf="task"
[ngClass]="{
  'not-assigned-task': userAssignedToTask(loggedUser?.id)
}"
>
  <div class="card-content">
    <div class="card-body">
      <h4 class="card-title">
        {{ task.name }}
      </h4>

      <p class="card-text mt-2" *ngIf="task.description">
        {{ task.description }}
      </p>

      <!-- AVATAR OF ASSIGNED USERS -->
      <ng-container *ngFor="let assignedUser of task.assigned_users">
        <app-text-avatar
                        [color]="assignedUser.user.avatar_hex_color"
                        [text]="getAvatarText(assignedUser.user)"
                        [tooltip]="assignedUser.user.username"
                        (click)="null"
                        data-bs-toggle="modal"
                        [attr.data-bs-target]="'#' + assignedUser.user.username + '-modal'">
        </app-text-avatar>
        <app-manage-assigned-user-modal [user]="assignedUser.user"
                                        [target]="assignedUser.user.username + '-modal'"
                                        [assignmentDate]="assignedUser.assigned_at"
                                        (onRemoveFromTask)="removeUserFromTask(assignedUser.user.id)">
        </app-manage-assigned-user-modal>
      </ng-container>

      <app-icon-avatar color="5b6370"
                       iconClass="bi bi-plus"
                       tooltip="add-new-user">
      </app-icon-avatar>

      <!-- AVATAR OF ASSIGNED USERS END -->
    </div>
  </div>
  <div class="card-footer d-flex justify-content-between">
    <span>
      <span class="badge" [class.bg-light-primary]="getDeadlineStatus() === DeadlineStatus.PRIMARY"
                        [class.bg-light-warning]="getDeadlineStatus() === DeadlineStatus.WARNING"
                        [class.bg-light-danger]="getDeadlineStatus() === DeadlineStatus.DANGER"
                        *ngIf="!!task.deadline">

          {{ task.deadline | date:dateFormat }}
        </span>
    </span>

    <button class="btn btn-light-primary">Read More</button>
  </div>
</div>
